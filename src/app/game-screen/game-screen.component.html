<main>

    <div class="player-container">
        <div *ngFor="let player of game.players; let i = index">
            <app-player [player]="player" [activePlayer]="i == game.currentPlayer"></app-player>
        </div>
    </div>
    
    <div class="game-field">
        <div class="card-stack">
            <img class="playing-card" src="/img/cards/card-cover.svg" alt="card-cover"
                *ngFor="let item of [0,1,2,3]; let i = index" 
                [ngStyle]="{'bottom.px': 16 + (i * 4)}" >

            <img class="top-card" src="/img/cards/card-cover.svg" alt="card-cover" (click)="drawCard()">

            <img class="played-card" src="/img/cards/{{ card }}.svg" alt="drawn-card"
                *ngFor="let card of game.playedCards; let i = index">

            <img class="drawn-card" src="/img/cards/{{ game.currentCard }}.svg" alt="drawn-card"
                *ngIf="game.drawCardAnimation"
                (click)="drawCard()">            
        </div>

        <p> {{game.playedCards.length}} / 52 </p>

        <button class="btn btn-draw" 
                [class.btn-primary]="this.game.players.length > 0" 
                [style.cursor]="this.game.players.length == 0 ? 'not-allowed' : 'pointer'" 
                (click)="drawCard()">
            Draw Card
        </button>
    </div>

    <app-card-info class="description-card" [card]="game.currentCard" [game]="game"></app-card-info>

    <div class="control-bar">
        <button class="btn btn-primary btn-add-user" (click)="openAddPlayerDialog()">
            <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" fill="none" viewBox="0 0 256 256">
                <path
                    d="M224,128a8,8,0,0,1-8,8H136v80a8,8,0,0,1-16,0V136H40a8,8,0,0,1,0-16h80V40a8,8,0,0,1,16,0v80h80A8,8,0,0,1,224,128Z">
                </path>
            </svg>
        </button>
        <button class="btn btn-clipboard" (click)="copyGameURL()">
            <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" fill="none" viewBox="0 0 256 256">
                <path
                    d="M176,160a39.89,39.89,0,0,0-28.62,12.09l-46.1-29.63a39.8,39.8,0,0,0,0-28.92l46.1-29.63a40,40,0,1,0-8.66-13.45l-46.1,29.63a40,40,0,1,0,0,55.82l46.1,29.63A40,40,0,1,0,176,160Zm0-128a24,24,0,1,1-24,24A24,24,0,0,1,176,32ZM64,152a24,24,0,1,1,24-24A24,24,0,0,1,64,152Zm112,72a24,24,0,1,1,24-24A24,24,0,0,1,176,224Z">
                </path>
            </svg>
        </button>
    </div>
    

</main>